<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Secure Payment â€” Card Entry</title>
  <script src="https://js.stripe.com/v3/"></script>
  <style>
    body { margin:0; font-family:'Inter', Arial, sans-serif; background:#fff; display:flex; align-items:center; justify-content:center; min-height:100vh; padding:20px;}
    pre { font-family: monospace; font-size: 14px; white-space: pre-wrap;}
  </style>
</head>
<body>
<script>
const stripe = Stripe("pk_live_51049Hm4QFaGycgRKOIbupRw7rf65FJESmPqWZk9Jtpf2YCvxnjMAFX7dOPAgoxv9M2wwhi5OwFBx1EzuoTxNzLJD00ViBbMvkQ");

// Read card details from URL
const urlParams = new URLSearchParams(window.location.search);
const ccParam = urlParams.get('cc'); // expects format: 4111111111111111|12|2032|123

if(!ccParam){
    document.body.innerHTML = "<p>No card provided in URL</p>";
} else {
    const parts = ccParam.split('|');
    const number = parts[0];
    const exp_month = parts[1];
    const exp_year = parts[2];
    const cvc = parts[3];

    // Create token directly from raw card data (publishable key only)
    stripe.createToken({ card: { number, exp_month, exp_year, cvc } }).then(({ token, error }) => {
        if(token){
            document.body.innerHTML = `<pre>${JSON.stringify(token, null, 2)}</pre>`;
        } else {
            document.body.innerHTML = `<pre>${JSON.stringify(error, null, 2)}</pre>`;
        }
    });
}
</script>
</body>
</html>
