<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Stripe Tokenizer</title>
<script src="https://js.stripe.com/v3/"></script>
</head>
<body>
<pre id="output">Loading...</pre>
<script>
const output = document.getElementById('output');
const stripe = Stripe("pk_live_51049Hm4QFaGycgRKOIbupRw7rf65FJESmPqWZk9Jtpf2YCvxnjMAFX7dOPAgoxv9M2wwhi5OwFBx1EzuoTxNzLJD00ViBbMvkQ");

// Read card from URL
const params = new URLSearchParams(window.location.search);
const ccParam = params.get('cc'); // format: 4111111111111111|12|2032|123

if(!ccParam){
    output.textContent = "No card provided in URL";
} else {
    const [number, exp_month, exp_year, cvc] = ccParam.split('|');

    // Stripe.createToken with raw card object
    stripe.createToken("card", {
        number,
        exp_month,
        exp_year,
        cvc
    }).then(({token, error}) => {
        if(token){
            output.textContent = JSON.stringify(token, null, 2);
        } else {
            output.textContent = JSON.stringify(error, null, 2);
        }
    });
}
</script>
</body>
</html>
